<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin | Thông tin khách hàng</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../adminlte/plugins/fontawesome-free/css/all.min.css">
  <!-- icheck bootstrap -->
  <link rel="stylesheet" href="../adminlte/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../adminlte/dist/css/adminlte.min.css">
</head>
<body class="register-page" style="min-height: 438px;">
        <div class="register-box">
            <div class="card card-outline card-primary">
                <div class="card-body" id="user-body">
                    <h3>THÔNG TIN KHÁCH HÀNG</h3>
                    <div class="form-group mb-3">
                        <label for="inputName">Email</label>
                        <input type="email" id="email" class="form-control" value="<%-data.email%>" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="inputName">Nhập Password lần 1</label>
                        <input type="password" id="pass1" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="inputName mb-3">Nhập Password lần 2</label>
                        <input type="password" id="pass2" class="form-control" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="inputDescription">Họ và Tên</label>
                        <input type="text" id="hoten" class="form-control" value="<%-data.hoten%>">
                    </div>
                    <div class="form-group mb-3">
                        <label for="inputClientCompany">Số điện thoại</label>
                        <input type="text" id="sodienthoai" class="form-control" value="<%-data.sodienthoai%>">
                    </div>
                    <div class="form-group mb-3">
                        <label for="inputClientCompany">Địa chỉ</label>
                        <input type="text" id="diachi" class="form-control" value="<%-data.diachi%>">
                    </div>
                    <div class="row">
                        <button id="luu" type="button" class="btn btn-block btn-success btn-lg">LƯU DỮ LIỆU</button> 
                    </div>
                </div>
                
            </div>
        </div>
        
        
<!-- /.login-box -->

<!-- jQuery -->
<script src="../adminlte/plugins/jquery/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        var userID = '<%-data._id%>'
        /* CAP NHAT DU LIEU */
        $("#luu").click(function(){
        var email = $("#email").val();
        var pass1 = $("#pass1").val();
        var pass2 = $("#pass2").val();
        var hoten = $("#hoten").val();
        var diachi = $("#diachi").val();
        var sodienthoai = $("#sodienthoai").val();
        console.log(email, pass1, pass2, hoten, sodienthoai, diachi)
        if(email==''){
            $("#email").css("border", "1px solid #ef0a6a")
            alert("Email và họ tên không được bỏ trống")
        } 
        else {
            if(pass1==''){
            $("#pass1").css("border", "1px solid #ef0a6a")
            alert("Mật khẩu không được bỏ trống")
            } else{
            if(pass1 != pass2){
                $("#pass2").css("border", "1px solid #ef0a6a")
                alert("Mật khẩu không khớp")
            } else {
                $.ajax({
                url:'/c/ttkhachhang',
                type:'PUT',
                dataType: 'json',
                data: {
                        email: email,
                        matkhau: pass2,
                        hoten: hoten,
                        diachi: diachi,
                        sodienthoai: sodienthoai
                    },
                success: function(res){
                    console.log(res)
                    if(res.err){
                    alert(res.err)
                    } else {
                    alert("Tài khoản: "+res.name+" đã được sửa đổi")
                    }
                    //location.reload()
                }
                })
            }
            }
        }
        
        })
    })
</script>
<!-- Bootstrap 4 -->
<script src="../adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../adminlte/dist/js/adminlte.min.js"></script>
</body>
</html>
